quitar del poblar los ejercicios eliptica. bicilceta estatica y caminadora
de la tabla entrenamientos_realizados quitar tiempo_segundos y diatancia_metros
comprobar que todos los csripts create coincide con la base de datos
revisar tablas porque iogual sobre campos o faltan
posibilidad de los horarios dispoibles gestionarlos como administrador
verificar los inserts de poblacon como los timestamp que hay algubnos a mano y deberian ser automaticos
en algunas tablas mirar si el campo estado se usa para algo y si no se usa se quita
quitar el campo ubicacion de la tabla clases_programadas




que un unstructor no se pueda tener clases a la misma hora el mismo dia, que cuando depliegues la hora te aparezca en rojo la hora que no se pueda
lo del correo tokens

en el zip final dejar el env.local del docker y quitar los otros dos env.local t quitar la carpeta node_modules y cambiar el compose



notas memoria:
portada de la memoria
en muchas llamadas para evitar la cache hemos creado un timestump para generar urls disitntas
poner en la memoria que suamos correo para verificar
cambiar node.js de modo development a definitivo
quitar comentarios de la ia en distinto ficheros
quitar y no exponer puertos api frontend


git clone https://github.com/izancelorrio/gym-infosys.git
cd gym-infosys
docker-compose --env-file .env.local.docker up --build





prerequisitos:
apt update
apt install docker.io -y
systemctl enable --now docker
curl -L "https://github.com/docker/compose/releases/download/v2.29.1/docker-compose-$(uname -s)-$(uname -m)" \
    -o /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose
sudo apt install unzip 
unzip gym-infosys
cd gym-infosys
docker-compose --env-file .env.local.docker up --build



-----------------------------------------------------------------------------------------------------------
services:
  postgres:
    image: postgres:17
    container_name: gym-postgres    
    restart: unless-stopped    
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASS}
      POSTGRES_DB: ${DB_NAME}
    ports:      
      - "${DB_PORT}:${DB_PORT}"
    volumes:      
      - /srv/docker/postgres/data:/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${DB_USER} -d ${DB_NAME}"]
      interval: 10s
      timeout: 5s
      retries: 5

  api:
    build:
      context: ./API
      dockerfile: Dockerfile
    container_name: gym-api
    restart: unless-stopped
    environment:
      - DB_HOST=${DB_HOST}
      - DB_PORT=${DB_PORT}
      - DB_NAME=${DB_NAME}
      - DB_USER=${DB_USER}
      - DB_PASS=${DB_PASS}
      - SMTP_SERVER=${SMTP_SERVER}
      - SMTP_PORT=${SMTP_PORT}
      - SMTP_USER=${SMTP_USER}
      - SMTP_PASS=${SMTP_PASS}
      - FROM_EMAIL=${FROM_EMAIL}
    ports:
      - "8000:8000"
    depends_on:
      postgres:
        condition: service_healthy
    healthcheck:
      test: ["CMD-SHELL", "curl -f http://localhost:8000/health || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 5

  frontend:
    build:
      context: .                # <--- porque el Dockerfile está en la RAÍZ
      dockerfile: Dockerfile    # <--- tu Dockerfile del frontend
      args:
        NEXT_PUBLIC_API_URL: ${NEXT_PUBLIC_API_URL}
    container_name: gym-frontend
    restart: unless-stopped    
    ports:
      - "3000:3000"
    depends_on:
      api:
        condition: service_healthy

  nginx:
    build:
      context: ./nginx
      dockerfile: Dockerfile
    container_name: gym-nginx
    restart: unless-stopped
    ports:
      - "8080:80"
    depends_on:
      - frontend

networks:
  default:
    name: gymnet

